# claude-cage default configuration
# Override per-user at: ~/.config/claude-cage/config.yaml

# ── Session defaults ─────────────────────────────────────────────
mode: cli
persist: true
max_sessions: 5

# ── Resource limits ──────────────────────────────────────────────
cpus: 2
memory: 4g

# ── Network ──────────────────────────────────────────────────────
# Policy: none | filtered | host
#   none     — no network access at all
#   filtered — only allowed_hosts reachable (default)
#   host     — full host network (NOT recommended)
network: filtered
dns: 1.1.1.1
allowed_hosts: api.anthropic.com,cdn.anthropic.com

# ── Container images ─────────────────────────────────────────────
image_cli: claude-cage-cli:latest
image_desktop: claude-cage-desktop:latest

# ── Desktop mode ─────────────────────────────────────────────────
desktop_port: 6080
vnc_port: 5900

# ── Lifecycle ────────────────────────────────────────────────────
idle_timeout: 60
memory_warn: 80
memory_kill: 95
gc_on_start: true

# ── Security ─────────────────────────────────────────────────────
read_only_root: true
seccomp_profile: default

# ── IPFS ────────────────────────────────────────────────────────
# Content-addressed artifact storage. Dual-write: MongoDB + IPFS.
ipfs_enabled: false
ipfs_api: http://localhost:5001
ipfs_gateway: http://localhost:8080
ipfs_pin_service: local

# ── Vector Embeddings ──────────────────────────────────────────
# Semantic search over traces, commits, blueprints.
embedding_enabled: false
embedding_model: all-MiniLM-L6-v2
embedding_dim: 384
embedding_api: local

# ── Architect Mode ─────────────────────────────────────────────
# Blueprint caching and design-first workflow.
architect_cache_similarity: 0.9
architect_auto_embed: true

# ── Execution mode ───────────────────────────────────────────────
# docker   - sandbox all commands in containers (default, for non-NixOS hosts)
# native   - run cargo/nix directly on host (for NixOS / gently-dev)
# hybrid   - docker for untrusted, native for cargo/nix
execution_mode: docker

# ── Logging ──────────────────────────────────────────────────────
log_level: info
